

# 2 简单的文本编辑

## vi命令

## 移动光标

### 单一的移动
* h
* j
* k
* l

### 数值参数

### 在一行中移动

### 按照文本块来移动 ws


## 简单的编辑

### 更改文本

* cw 从光标到单词结尾
* c2b 从光标往前两个单词
* c$ 从光标到本行结尾
* c0 从光标到此行的开头

#### 单词
#### 整行cc
* C = c$ 可以更改光标到本行末尾的文本
#### 字符
* r 替换字符,会将指定的字符位置替换成相同的字符，会自动回到命令模式
* R 进入覆盖模式进行替换
#### 替换文本s
* s 替换字符，从当前光标开始
* S 整行删除，进入插入模式

### 更改大小写
* ~ 小写替换成大写/大写替换成小写

### 删除文本d
#### 单词
* dw 删除单词或者光标到单词末尾
* de 删除到单词末尾不包括空白
* dE 删除到单词末尾包括标点
* db 向前删除
 
#### 整行
* dd 删除整行
* D 删除光标开始到本行结束

#### 字符
* x 删除光标所在位置的字符

#### 删除文件时发生的问题
* u 撤销上一个dd
* U
* p 恢复最近的错误
* (n)p 从第(n)缓冲区恢复

### 移动文本
* p 将文本放在光标后
* P 将文本放在光标前

#### 对调两个字符

### 复制文本
* yy=Y 拖拽一整行

### 重复或者撤销上一个命令
#### 重复
* . 重复上一个命令

#### 撤销
* u 撤销上一个命令并恢复删除的行
* U 撤销对同一行的所有编辑动作
* Ctrl+R 重做 redo

### 更多插入文本的方法
* A 在一行的结尾处附加文本
* I 在一行的开头处插入文本
* o 在光标所在位置的下一行打开新行
* O 在光标所在位置的上一行打开新行
* s 删除光标所在位置后再替换文本
* S 删除一整行后再替换文本
* R 用新字符覆盖现有字符
以上命令都会进入插入模式

### 插入命令的数值参数
格式：（数值）命令（重复字符）

### 用J合并两行
* j 合并两行

# 3 快速移动位置
## 根据屏幕来移动

### 滚动一整屏
* ^F 往前滚动一整屏
* ^B 往后滚动一整屏
* ^D 往前（下）滚动半屏
* ^U 往后（上）滚动半屏

### 用z调整屏幕位置
* z <code>ENTER</code> 将光标移到屏幕顶端并滚动屏幕
* z. 将光标移到屏幕中间并滚动屏幕
* z- 将光标移到屏幕底端并滚动屏幕

### 重画屏幕
* <code>CTRL+L</code>

### 在屏幕中移动
* H 移到屏幕顶端的行
* M 移到屏幕中央的行
* L 移到屏幕底端的行
* nH 移到屏幕顶端往下的n行
* nL 移到屏幕底端网上的n行

### 根据行移动
* <code>ENTER</code> 移到下一行的第一个字符
* + 移到下一行的第一个字符
* - 移到上一行的第一个字符

#### 在当前行移动
* ^ 移到当前行的第一个非空格处
* n| 移到当前行的第n列

## 根据文本块来移动
* e 移到单词的结尾
* E 移到单词的结尾（忽略标点符号）
* ( 移到当前句子的开头
* ) 移到当前句子的结尾
* { 移到当前段的开头
* } 移到当前段的结尾
* [[ 移到当前这一节的开头
* ]] 移到下一节的开头

## 根据搜索模式的结果来移动
* / 搜索模式字符串
* ? 往回搜索模式字符串

### 重复搜索
* n 往同一个方向重复搜索
* N 往相反的方向重复搜索
* /<code>ENTER</code> 往前重复搜索
* ?<code>ENTER</code> 往后重复搜索

#### 通过搜索修改文本
* d?move 向前删除直到出现move的地方

### 在当前行中搜索
* fx 搜索（将光标移到）本行中下一个出现x的地方，x代表任何字符
* Fx 搜索（将光标移到）本行中上一个出现x的地方
* tx 搜索（将光标移到）本行中下一个出现x的地方的前一个字符
* Tx 搜索（将光标移到）本行中下一个出现x的地方的后一个字符
* ; 重复上一个搜索命令，方向相同
* , 重复上一个搜索命令，方向相反

## 根据行号来移动
* :set nu 显示行号
* :(行号) 移动到行号行

### G（转至）命令
* nG 移动到农行
* `` 回到上一次G命令的行(如果搜索命令，则回到上一次搜索命令的地方)
* '' 回到上一次命令的行的开头

# 4越过基础的藩篱
## 更多命令的组合
命令组合的一般形式<br/>
(number)(command)(text object)<br/>

## 打开vi的选项
### 前进到特定的位置
* vi +n file 在第n行打开file
* vi + file 在最后一行打开file
* vi +/parttern file 在第一个出现pattern的地方打开file
* +/"you make" 或者 +/you\ make 如果模式中包含空格 
  
### 只读模式
* vi -R/view file 只读模式

### 恢复缓冲区
* ex -r/vi -r 得到系统保存下来的所有文件列表
* vi -r file 恢复原来的文件
* :pre 强制系统没有死机也保存缓冲区

## 善加利用缓冲区
### 恢复删除
* "np 恢复第n个缓冲区到
* "1pu.u.u 每次u撤销当前恢复，.恢复下个缓冲区

### 将文本拖曳到命名缓冲区中
* "dyy 将当前行拖曳到缓冲区d中
* "a7yy 将后续7行拖曳到缓冲区a中
* "dP 将缓冲区d的内容放置在光标前
* "ap 将缓冲区a的内容放置在光标后
* "a5dd 将删除的5行保存到缓冲区a中
* "zd) 删除从光标开始到句子结尾处的内容，并且将内容保存到缓冲区z中
* 2) 往前移两个句子
* "Zy) 将下一个句子添加到z中，大写字母添加到后面，小写会覆盖掉原有内容


## 对一处做标记
* mx 将当前位置标记成x
* 'x 将光标移到标记x所在行的第一个字符
* `x 将光标移到以x标记的字符
* `` 移动位置之后，回到上一个标记或上下文的确切位置
* '' 回到上一个标记或者上下文所在行的开头

# 5ex编辑器概述